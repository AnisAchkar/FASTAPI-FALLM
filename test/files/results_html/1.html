<!DOCTYPE html>

<head>
<meta charset="utf-8"/><link href="code_formated.css" rel="stylesheet" type="text/css"/>
</head>
<html>
<body><div><h1>User question:</h1><p>Get me the json code for the output of document Clement first Task.pdf</p></div><div><h1>AI answer:</h1><h1></h1><p>Here is the JSON code for the output of document Clement first Task.pdf:</p><div class="barre-langage">json</div><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">"answer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;html&gt; ... aren't used, get deleted [2][3] [6] [5]. The o"</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"chat_history"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="nt">"question"</span><span class="p">:</span><span class="w"> </span><span class="s2">"What is the first question"</span><span class="p">,</span>
<span class="w">            </span><span class="nt">"answer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The weather is rainy."</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="nt">"question"</span><span class="p">:</span><span class="w"> </span><span class="s2">"How are you today?"</span><span class="p">,</span>
<span class="w">            </span><span class="nt">"answer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"I am good, and you?"</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="nt">"question"</span><span class="p">:</span><span class="w"> </span><span class="s2">"What is expiration policy"</span><span class="p">,</span>
<span class="w">            </span><span class="nt">"answer"</span><span class="p">:</span><span class="w"> </span><span class="s2">" ... aren't used, get deleted [2][3] [1]. The"</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">    </span><span class="nt">"references"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="nt">"document"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ValmontFinalFile.docx"</span><span class="p">,</span>
<span class="w">            </span><span class="nt">"similarity"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.3443</span><span class="p">,</span>
<span class="w">            </span><span class="nt">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Overview of Friday365 (for end users)\n..."</span><span class="p">,</span>
<span class="w">            </span><span class="nt">"referenceNumber"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="nt">"document"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Expiration policy.pdf"</span><span class="p">,</span>
<span class="w">            </span><span class="nt">"similarity"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0253</span><span class="p">,</span>
<span class="w">            </span><span class="nt">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"\n12/20/23, 3:25 PM Mail - Anis Achkar -..."</span><span class="p">,</span>
<span class="w">            </span><span class="nt">"referenceNumber"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">]</span>
<span class="p">}</span>
</pre></div><p><br/></p><p>[5] [2]. </p></div><div><h1>Sources:</h1><p>{'document': 'Clement task 1.pdf', 'similarity': 2.074089527130127, 'content': '"base64":"data:text/plain;base64,Q29tcGFyaW5\n\n"document":"ValmontFinalFile.docx"\n\n},\n\n{\n\n"base64":"data:text/plain;base64,Q29tcGFyaW5\n\n"document":"Expiration policy.pdf"\n\n}\n\n]\n\n}\n\n\ue073\ue094� Output (add references + add reference number to text + html for the \nanswer):\n\nreferences: \n\nsimilarity - between 0 and 1 \n\nreference number - reference number to the content \n\ndocument - the name of the document\n\ncontent - the content \n\nTHE CONTENT CONTAINS SMALL BRAQUETS NUMBERS THAT POINT \nTO EACH REFERENCE\n\nanswer:\n\nShould be formatted in html \n\nWe would like the text to be more easily read (bullet points, bolding, \nspaces, quotes …)\n\nWe would also like for code to look like code when generated in ChatGPT \n\n\nCLEMENT\ue092 TASK 1 7\n\n{\n\n  "answer": "&lt;html&gt; ... aren\'t used, get deleted [2][3]. The o\n\n  "chat_history": [\n\n    {\n\n      "question": "what is the first question",\n\n      "answer": "The weather is rainy."\n\n    },\n\n    {\n\n      "question": "How are you today?",\n\n      "answer": "I am good, and you?"\n\n    },\n\n    {\n\n      "question": "what is expiration policy",\n\n      "answer": " ... aren\'t used, get deleted [2][3]. The\n\n    }\n\n  ],\n\n  "references": [\n\n    {\n\n      "document": "ValmontFinalFile.docx",\n\n      "similarity": 0.3443,\n\n      "content": "Overview of Friday365 (for end users)\\n\\\n\n      "referenceNumber": 2\n\nWhat the code formatting should look like\n\n ChatGPT Writing 200 lines of SQL specifically tailored to a single purpose can result in a very complex and detailed script, potentially involving multiple operations such as creating tables, inserting data, updating records, and querying information with advanced joins, subqueries, and aggregate functions.', 'referenceNumber': 1}</p><p>{'document': 'Clement task 1.pdf', 'similarity': 2.0343716144561768, 'content': '"similarity": 0.3443,\n\n      "content": "Overview of Friday365 (for end users)\\n\\\n\n      "referenceNumber": 2\n\nWhat the code formatting should look like\n\n ChatGPT Writing 200 lines of SQL specifically tailored to a single purpose can result in a very complex and detailed script, potentially involving multiple operations such as creating tables, inserting data, updating records, and querying information with advanced joins, subqueries, and aggregate functions. Given the constraints of this environment, I\'ll illustrate what a large SQL script might look like by composing a simplified example that incorporates various SQL operations without focusing on a specific database schema or requirement. This script won\'t represent a real-world application but will give you a sense of the complexity and structure of a lengthy SQL script. sql Copy code - - Example SQL script with various operations -- Create several tables CREATE TABLE Employees ( EmployeeID INT PRIMARY KEY, FirstName VARCHAR(100), LastName VARCHAR(100), DepartmentID INT, Email VARCHAR(100) CREATE TABLE Departments ( DepartmentID INT PRIMARY KEY. \n\n\nCLEMENT\ue092 TASK 1 8\n\n    },\n\n    {\n\n      "document": "Expiration policy.pdf",\n\n      "similarity": 0.0253,\n\n      "content": "\\n12/20/23, 3:25 PM Mail - Anis Achkar -\n\n      "referenceNumber": 3\n\n    }\n\n  ]\n\n}\n\n3. Overall improvements: \nNo more Conversational retrieval chain \n\nquery transformation multi-query \n\nstrong memory \n\nhtml formatter for code and text \n\nretreive the documents being used as well as the context \n\ncode with the idea in mind that we need to re-create the same logic for azure \ncog search later on - create classes \n\nWHAT DOES SUCCESS LOOKS LIKE\n Input and ouput are conform to future input and ouput \n\n Memory works well. So if I ask the chatbot about an old question, he is \nsuppose to answer me.\n\n Text ouput formatting: \n\nThe format of the code is similar to chatGPT', 'referenceNumber': 2}</p><p>{'document': 'Clement task 2.pdf', 'similarity': 1.3514093160629272, 'content': 'same logic as library insight but use the web instead of azure cognitive \nsearch \n\n2. INPUT \n\n{\n\n  "question": "what is expiration policy",\n\n  "chat_history": [\n\n  {\n\n    "question": "what is the first question",\n\n    "answer": "The weather is rainy."\n\n  },\n\n  {\n\n    "question": "How are you today?",\n\n    "answer": "I am good, and you?"\n\n  }\n\n]\n\n}\n\n3. OUTPUT\n\n{\n\n"answer": "&lt;html&gt; ... aren\'t used, get deleted [2][3]. The o\n\n"chat_history": [\n\n{\n\n\nCLEMENT\ue092 TASK 2 9\n\n"question": "what is the first question",\n\n"answer": "The weather is rainy."\n\n},\n\n{\n\n"question": "How are you today?",\n\n"answer": "I am good, and you?"\n\n},\n\n{\n\n"question": "what is expiration policy",\n\n"answer": " ... aren\'t used, get deleted [2][3]. The\n\n}\n\n],\n\n"references": [\n\n{\n\n"document": "Friday365 website",\n\n"link":"https://friday365.fr/",\n\n"similarity": 0.3443,\n\n"content": "Overview of Friday365 (for end users)\\n\\..."\n\n"referenceNumber": 2\n\n},\n\n{\n\n"document": "Alt-up website",\n\n"link":"https://www.alt-up.io/",\n\n"similarity": 0.0253,\n\n"content": "\\n12/20/23, 3:25 PM Mail - Anis Achkar ..."\n\n"referenceNumber": 3\n\n}\n\n]\n\n}', 'referenceNumber': 5}</p><p>{'document': 'Clement task 1.pdf', 'similarity': 1.3146445751190186, 'content': 'CLEMENT\ue092 TASK 1 3\n\n3. Current input and output\n\ue072\ue094� Input\n\n{\n\n  "question": "What does he do for a living",\n\n  "chat_history": [\n\n    {\n\n      "question": "What does he do for a living",\n\n      "answer": "I am not sure"\n\n    }\n\n INPUT "question": "What does he do for a living\', "chat_history": [ "how are you\': \' good and you" "documents": [\'base64 documents","base64 documents"] docbase 64[] CHAT_HISTORY QUERY? EXTRACT TEXT MEMORY FROM DOCBASE64 ConversationBufferMemory CONVERSATIONAL RETRIEVAL CHAIN memory = data - extract_text_from_doc(docBase64) ConversationBufferMemory( ConversationalRetrievalChain.from JIml input_key="question", document = | memory_keys"chat_history", Document(page_content=data, metadata=metadata) output_key= "answer", retur messages= True memoryamemory, get_chat_history-lambda x: x CREATE DOCUMENT[] PC &amp; MD RESULT QA. INVOKE document = [Documentipage_content-data, result = qa.invoke question": question, "chat_history" EMBEDDING TEXT_SPLITTER ADA002 embeddings . text_splitter . Recurare Character TextSplitter! AzureOpenAlEmbeddingsd chunk_size=900, azure_deployment =&lt; EMBEDDING_DEPLOYMENT&gt;&gt; chunk_overlap-200, azure_endpoint =&lt; AZURE_OPENAL_ENDPOINT&gt; separators-[Vin", "in", "", ""] api_key- &lt; AZURE_OPENAI API_KEY&gt; documents = text_splitter.split_documents(documents) VECTORDB FAISS vectordb - FAISS.from_documents (documents-documents, embedding-embeddings) \n\n\nCLEMENT\ue092 TASK 1 4\n\n  ],\n\n  "documents": [\n\n    "data:text/plain;base64,Q29tcGFyaW5nIERyLiBBbmlzIGFuZCBE\n\n    "data:text/plain;base64,Q29tcGFyaW5nIERyLiBBbmlzIGFuZCBE\n\n  ]\n\n}\n\n\ue073\ue094� Output\n\n{\n\n  "answer": "Dr. Paul specializes in cardiology and has devote\n\n  "chat_history": [\n\n    {\n\n      "question": "What does he do for a living",\n\n      "answer": "I am not sure"\n\n    },\n\n    {\n\n      "question": "What does he do for a living",', 'referenceNumber': 6}</p></div></body>
</html>